<!--bootstrap шаблон-->
<!doctype html>
{% load i18n %}
<html lang="en">
{% load static %}
{% load custom_tags %}
{% load filters %}
{% load cache %}
{% load tz %} <!-- тег для работы с часовыми поясами -->

<head>
    <title>
        {% block amount1 %}
        {% endblock %}
    </title>
    {% cache 60 head %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.108.0">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/blog/">

    <link href="{% static '/assets/dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <style>
        .bd-placeholder-img { font-size: 1.125rem; text-anchor: middle; -webkit-user-select: none; -moz-user-select: none; user-select: none; } @media (min-width: 768px) { .bd-placeholder-img-lg {  font-size: 3.5rem; } } .b-example-divider { height: 3rem; background-color: rgba(0, 0, 0, .1); border: solid rgba(0, 0, 0, .15); border-width: 1px 0; box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15); } .b-example-vr { flex-shrink: 0; width: 1.5rem; height: 100vh; } .bi { vertical-align: -.125em; fill: currentColor; } .nav-scroller { position: relative; z-index: 2; height: 2.75rem; overflow-y: hidden; } .nav-scroller .nav { display: flex; flex-wrap: nowrap; padding-bottom: 1rem; margin-top: -1px; overflow-x: auto; text-align: center; white-space: nowrap; -webkit-overflow-scrolling: touch; }

        body {background-color: {% if current_time.hour >= 19 or current_time.hour <= 7 %} #E0E0E0 {% else %} white {% endif %};}
    </style>
    <!-- Custom styles for this template -->
    <link href="https://fonts.googleapis.com/css?family=Playfair&#43;Display:700,900&amp;display=swap"
          rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="{% static 'blog.css' %}" rel="stylesheet">
    {% endcache head %}
</head>

<body>
    {% cache 60 header %}
    <div class="container">
        <header class="blog-header lh-1 py-3">
            <div class="row flex-nowrap justify-content-between align-items-center">
                <div class="col-4 pt-1">
                    <a class="link-secondary" href="/subscriptions">{% trans "Subscribe" %}</a>
                </div>

                <div class="col-4 text-center">
                    <a class="blog-header-logo text-dark" href="/news">{% trans "News Portal" %}</a>
                </div>
                <div class="col-4 d-flex justify-content-end align-items-center">
                    <a class="link-secondary" href="/news/search" aria-label="Search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
                             stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                             class="mx-3" role="img" viewBox="0 0 24 24">
                            <title>{% trans "Find" %}</title>
                            <circle cx="10.5" cy="10.5" r="7.5"/>
                            <path d="M21 21l-5.2-5.2"/>
                        </svg> </a>
    {% endcache header %}
                    <form action="{% url 'set_language' %}" method="POST"> {% csrf_token %} <!-- Не забываем по csrf_token для POST запросов -->
                        <input type="hidden" name="next" value="/clear{{ redirect_to }}">

                            {% get_current_language as LANGUAGE_CODE %}

                        <select name="language" id="">
                            {% get_available_languages as LANGUAGES %} <!-- получаем языки -->
                            {% get_language_info_list for LANGUAGES as languages %} <!-- Помещаем их в список languages -->

                            {% for language in languages %} <!-- Итерируясь по списку, выводим их название на языке пользователя и код -->
                                <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %} selected {% endif %}>
                                    {{ language.name_local }} - {{ language.code }}
                                </option>
                            {% endfor %}
                        </select>
                        <input type="submit" value={% trans "set" %}>
                    </form>
                    <a class="link-secondary" href=# >{{ user }}</a>
                    {% if user.is_authenticated %}
                        <a class="btn btn-sm btn-outline-secondary" href="/accounts/logout">{% trans "Logout" %}</a>
                    {% else %}
                        <a class="btn btn-sm btn-outline-secondary" href="/accounts/login">{% trans "Login" %}</a>
                    {% endif %}
                </div>
            </div>
        </header>
            {% block time %}
            <div class="nav-scroller py-1 mb-2">
                <nav class="nav d-flex justify-content-between">

                    {% get_current_timezone as TIME_ZONE %}
                <form action="" method="POST">
                    {% csrf_token %}
                    <label for="timezone">Time zone:</label>
                    <select name="timezone">
                        {% for tz in timezones %}
                        <option value="{{ tz }}"{% if tz == TIME_ZONE %} selected {% endif %}>{{ tz }}</option>
                        {% endfor %}
                    </select>
                    <input type="submit" value="Set">
                </form>
                {{ TIME_ZONE }}
                {{ current_time }} <!-- Отображаем время в выбранном часовом поясе  -->

<!--                    <a class="p-2 link-secondary" href="#">Спорт</a>-->
<!--                    <a class="p-2 link-secondary" href="#">U.S.</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Technology</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Design</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Culture</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Business</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Politics</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Opinion</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Science</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Health</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Style</a>-->
<!--                    <a class="p-2 link-secondary" href="#">Travel</a>-->

                </nav>
            </div>
            {% endblock time %}
    </div>

    <main class="container">

        {% block top %}
        <div class="bg-gradient bg-opacity-75 mb-4 p-4 p-md-5 rounded text-bg-dark">

            <div class="col-lg-11 col-md-6 px-0">
                 {% block amount2 %}
                 {% endblock amount2 %}
            </div>

        </div>
        {% endblock top %}


        {% block preview %}
        <div class="row mb-2">
            <div class="col-md-6">
                <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                    <div class="col p-4 d-flex flex-column position-static">
                        <strong class="d-inline-block mb-2 text-primary">{% trans "Best Post" %}</strong>
                        {% best_post as best_p %}
                            <h4 class="mb-0">{{ best_p.title |censor }}</h4>
                            <div class="mb-1 text-muted">{{ best_p.post_date }}</div>
                            <p class="card-text mb-auto">{{ best_p.preview |censor }}</p>
                            <a href="{{best_p.id}}" class="stretched-link">{% trans "Continue reading" %}</a>
                    </div>
                    <div class="col-auto d-none d-lg-block">
                        <IMG src= "{% static 'assets/logo/loginlogo.png' %}" width="200">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                    <div class="col p-4 d-flex flex-column position-static">
                        <strong class="d-inline-block mb-2 text-success">{% trans "Most commited" %}</strong>
                        {% most_commented as mc %}
                        <h4 class="mb-0">{{ mc.title |censor }}</h4>
                        <div class="mb-1 text-muted">{{ mc.post_date }}</div>
                        <p class="mb-auto">{{ mc.preview |censor }}</p>
                        <a href="{{mc.id}}" class="stretched-link">{% trans "Continue reading" %}</a>
                    </div>
                    <div class="col-auto d-none d-lg-block">
                        <svg class="bd-placeholder-img" width="200" height="250" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
                            <title>Placeholder</title>
                            <rect width="100%" height="100%" fill="#55595c"/>
                            <text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        {% endblock %}

        <div class="row g-5">
            <div class="col-md-8">
                <article class="blog-post">
                    {% block content %} {% endblock content %}
                </article>
                <nav class="blog-pagination" aria-label="Pagination">
                    {# Добавляем пагинацию на страницу #}
                    {% load custom_tags %}
                {% if page_obj.paginator.num_pages > 1 %}
                    {# Информация о предыдущих страницах #}
                    {% if page_obj.has_previous %}
                        <a class="btn btn-outline-primary rounded-pill" href="?{% url_replace page=1 %}">1</a>
                            {% if page_obj.previous_page_number != 1 %}
                                <a class="btn btn-outline-secondary rounded-pill"
                                   href="?{% url_replace page=page_obj.previous_page_number %}">
                                    {{ page_obj.previous_page_number }}</a>
                            {% endif %}
                    {% endif %}

                    {# Информация о текущей странице #}
                    <a class="btn btn-outline-primary rounded-pill">{{ page_obj.number }}</a>

                    {# Информация о следующих страницах #}
                    {% if page_obj.has_next %}
                        <a class="btn btn-outline-secondary rounded-pill"
                           href="?{% url_replace page=page_obj.next_page_number %}">
                            {{ page_obj.next_page_number }}</a>
                            {% if paginator.num_pages != page_obj.next_page_number %}
                                <a class="btn btn-outline-primary rounded-pill"
                                   href="?{% url_replace page=page_obj.paginator.num_pages %}">
                                    {{ page_obj.paginator.num_pages }}</a>
                            {% endif %}
                    {% endif %}
                {% endif %}
                </nav>
            </div>
            <div class="col-md-4">
                <div class="position-sticky" style="top: 2rem;">
                    <div class="p-4 mb-3 bg-light rounded">
                        {# проверяем права на создание постов #}
                        {% if perms.newsapp.add_post %}
                            <a class="btn btn-outline-primary rounded-pill" href="/news/create">{% trans "Create News" %}</a>
                            <p> </p>
                            <a class="btn btn-outline-primary rounded-pill" href="/articles/create">{% trans "Create Article" %}</a>
                            <hr>
                        {% endif %}
                        {% cache 300 archive %}

                        <h4 class="fst-italic">{% trans "Arhive" %}</h4>
                        <li><a class="mb-0" href="">_</a></li>
                        <li><a class="mb-0" href="">_</a></li>
                    </div>
                    <div class="p-4">
                        <h4 class="fst-italic"></h4>
                        <ol class="list-unstyled mb-0">
                            <li><a href="/contacts">{% trans "Contacts" %}</a></li>
                            <li><a href="/about">{% trans "About" %}</a></li>
                        </ol>
                    </div>
                </div>
            </div>
            {% endcache archive %}
        </div>
    </main>
    {% cache 300 footer %}
    <footer class="blog-footer">
        <p>{% trans "Blog template built for" %} <a href="https://getbootstrap.com/">Bootstrap</a> {% trans "by" %} <a href="https://twitter.com/mdo">@mdo</a>.</p>
        <p> <a href="#">{% trans "Back to top" %}</a> </p>
    </footer>
    {% endcache footer %}
</body>
</html>
