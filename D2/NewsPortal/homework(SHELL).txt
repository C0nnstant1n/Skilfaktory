1

from newsapp.models import *
User.objects.create_user('Bonifaciy')
User.objects.create_user('Philosof')

2

author1 = Author(user = User.objects.get(username = 'Bonifaciy'))
author1.save()
author2  = Author.objects.create(user = User.objects.get(username = 'Philosof'))

3

Category.objects.create(category_name = 'Спорт')
Category.objects.create(category_name = 'Политика')
Category.objects.create(category_name = 'Экономика')
Category.objects.create(category_name = 'Наука')

4

Post.objects.create(type = 'article', title = 'Русские вратари — одни из лучших в НХЛ.', post_text = "Вратарь «Флориды» сравнялся по победам с глыбой российского вратарского цеха Евгением Набоковым. С появлением дочери стараюсь не нести хоккей в быт", author = author1)
post1 = Post.objects.get(title = 'Русские вратари — одни из лучших в НХЛ.')
cat = Category.objects.all()[0]
post1.category.add(cat)
Post.objects.create(type = 'article', title = 'НХ', post_text = "Вратарь", author = author1)
post2 = Post.objects.get(title = 'НХ')
post2.category.add(cat)
Post.objects.create(type = 'news', title = 'Новость', post_text = "Новость ниочем", author = author2)
post3 = Post.objects.get(title = 'Новость')
cat = Category.objects.all()[1]
post3.category.add(cat)
cat = Category.objects.all()[2]
post3.category.add(cat)

5

Comment.objects.create(text_comment = "example", post = post1, user_comment = User.objects.get(username = 'Bonifaciy'))
Comment.objects.create(text_comment = "Проверка", post = post2, user_comment = User.objects.get(id=1))
Comment.objects.create(text_comment = "Правда?", post = Post.objects.get(id = 3), user_comment = User.objects.get(id=2))
Comment.objects.create(text_comment = "НЕ ВЕРЮ", post = Post.objects.get(id = 3), user_comment = User.objects.get(username = 'Philosof'))

6

post1.like()
post1.like()
post1.like()
Post.objects.get(id = 2).dislike()
post2.like()
post3.like()
Comment.objects.get(id = 1).dislike()
Comment.objects.get(id = 2).dislike()
Comment.objects.get(id = 3).dislike()
Comment.objects.get(id = 1).dislike()
Comment.objects.get(id = 2).dislike()
Comment.objects.get(id = 3).like()
Comment.objects.get(id = 1).like()
Comment.objects.get(id = 2).like()
Comment.objects.get(id = 3).like()
Comment.objects.get(id = 1).like()
Comment.objects.get(id = 2).like()
Comment.objects.get(id = 3).like()
Comment.objects.get(id = 1).like()
Comment.objects.get(id = 2).like()
Comment.objects.get(id = 3).like()
Comment.objects.get(id = 1).like()
Comment.objects.get(id = 2).dislike()
Comment.objects.get(id = 3).dislike()
Comment.objects.get(id = 1).dislike()
Comment.objects.get(id = 2).dislike()

7

at = Author.objects.get(user = User.objects.get(username = 'Bonifaciy'))
at.update_rating()
at = Author.objects.get(id = 2)
at.update_rating()

8

Author.objects.order_by('-author_rate').values('user__username', 'author_rate')[0]

9

best_post = Post.objects.all().order_by('-post_rate')
from datetime import datetime
date = best_post.values('post_date')[0].get('post_date').strftime("%H:%M %d-%m-%y ")
name = best_post.values('author__user__username')[0].get('author__user__username')
rating = best_post.values('post_rate')[0].get('post_rate')
title = best_post.values('title')[0].get('title')
preview = best_post[0].preview()
print(f"  {date} Автор - {name}, рейтинг статьи - {rating}\n {title}\n {preview}")

10

comments = Comment.objects.filter(post_id = best_post[0])
comments.all().values('time', 'user_comment__username', 'rate_comment', 'text_comment')


